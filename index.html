<!DOCTYPE html>
<html lang>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kamby Language</title>
    <style>
@import url('https://fonts.googleapis.com/css2?family=M+PLUS+Code+Latin:wght@100..700&display=swap');
html { font-family: "M PLUS Code Latin", sans-serif; font-size: 1.2rem; color: #CCC; background: #222; }
body { margin: 0 auto; }
header { padding: 40px 10px; background:#2e2e2e; border-bottom: 2px solid #444; }
header h1, header h3 { margin: 0; }
header h1 { font-size: 3rem; text-align: center; }
header h3 { text-align: center; }
main { margin: 0 auto; padding: 30px 10px; max-width: 800px; }
footer { padding: 10px 10px; font-size: 0.8rem; text-align: center; background:#2e2e2e; border-top: 2px solid #444; }
h1, h2, h3, h4, h5, h6 { font-weight: 500; color: #FFF; }
h2, h3 { margin-top: 50px; }
a { color: #CCC; }
button, input[type=submit] {
  padding: 10px 20px; font-family: inherit; font-size: 1.0rem; color: #CCC;
  cursor: pointer; background: #444; border: none; box-shadow: 4px 4px 0 #666;
}
button:active, input[type=submit]:active { margin: 4px -4px -4px 4px; background: #444; box-shadow: none; }
.title { color: #6DD !important; }
    </style>
    <script type='text/javascript'>
      function highlight(selector) {
        document.head.insertAdjacentHTML('beforeend', `<style>${selector} span * { color: inherit !important }</style>`);
        document.querySelectorAll(selector).forEach((element) => {
        Object.assign(element.style, {
          boxSizing: "border-box", backgroundColor: "#111", color: "#bbb", fontFamily: "monospace", padding: "25px", whiteSpace: "pre-wrap"
        });
        element.innerHTML = element.innerHTML
          .replace(/(true|false|get|def|set|del|if|else|while|for)/g, "<span style =color:#6bf>$1</span>")
          .replace(/(split|join|length|upper|lower|print|input|read|write|load)/g, "<span style =color:#6bf>$1</span>")
          .replace(/(\/\*.+\*\/|\/\/ .+|# .+)/g, "<span style =color:#666>$1</span>")      // Comments
          .replace(/(".*?"|'.*?')/g, "<span style =color:#bd0>$1</span>")                  // Strings
          .replace(/([\s\(\[\$])(\d+)/g, "$1<span style =color:#d86>$2</span>")            // Numbers
          .replace(/(([{}\[\]\(\)]))/g, "<span style =color:#b6d>$1</span>")               // Blocks
        });
      }
    </script>
  </head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-151RBSJ3K5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-151RBSJ3K5');
  </script>
  <body onload="highlight('pre:has(code)')">
    <header>
      <h1><span class="title">Kamby Language</span></h1>
      <main><h3>A small, embeddable and convenient language for who want to use and understand what is happening behind the scenes.</h3></main>
    </header>
    
    <main>
      <!-- REPL -->
      <form id="input-form" action="#input-form">
        <textarea id="input" name="code"></textarea>
        <button type="submit">Run</button>
      </form>
      <pre id="output" class="highlight"><code>--- </code></pre>
      <style>
      #input-form, #output {
        display: inline-block; vertical-align: top;
        width: 49%; height: 300px; margin: 0 0 60px;
      }
      #input-form textarea {
        width: 100%; height: 300px; padding: 20px;
        font-family: monospace; font-size: 0.8em; color: #FFF;
        box-sizing: border-box; border: none; background: #333;
      }
      @media (max-width: 800px) {
        #input-form, #output { display: block; width: 100%; }
      }
      </style>
      <script async type="text/javascript" src="kamby.js"></script>
      <script type='text/javascript'>
        input.value = unescape((new URLSearchParams(location.search)).get("code") || "print('Hello, World!')");
        var Module = { print(...args) {
          output.innerHTML += args.join(' ').replace(/^(> |... )*/g, '') + "\n"
        }};
        window.prompt = function() {
          window.prompt = null;
          return (new URLSearchParams(location.search)).get("code");
        };
      </script>
      <!-- /REPL -->

<h2 id="how-to-build">How to build</h2>
<p>You can build the binary using Makefile.</p>
<pre><code>$ make                                 # Build binary
$ ./kamby --help                       # Display help message
$ ./kamby --version                    # Display version information
$ ./kamby -c script.ka &gt; script.c      # Transpile to C
$ ./kamby script.ka                    # Run script
$ ./kamby                              # Run REPL</code></pre>
<h2 id="variables-stack">Variables stack</h2>
<p>Variables can contain any type of data, including number, strings,
lists or even blocks of code.</p>
<pre><code>message := &#39;Hello, World!&#39;  # Define a new variable
message = &#39;Bye, bye&#39;        # Edit variable value
message := &#39;Hello again! &#39;  # Append new &#39;message&#39; in stack
message = ()                # Remove last &#39;message&#39; in stack
print(message)              # Message has old value &#39;Bye, bye&#39;

/* or */

def message &#39;Hello, World!&#39;
set message &#39;Bye, bye&#39;
def message &#39;Hello again! &#39;
del message</code></pre>
<p>Variables are not unique. You can declare multiple values for the
same variable name using “:=” and append into the stack. If you want to
edit the last declaration, just use a simple “=” operator. To remove the
last variable with specific name in stack, use “del varname” or set it
to “()”.</p>
<p>You can return the value of some stack item using index instead of
var name</p>
<pre><code>num1 = 12  // Change num1 value or define if inexistent
num2 = 23
print $0   // Return last item value from stack. 23
print $1   // Return the second item from stack. 12</code></pre>
<p>Atoms like numbers and strings can be named and not saved in the
stack. This is useful to name a value in a list item.</p>
<pre><code>list = [firstName: &#39;John&#39;, lastName: &#39;Doe&#39;, age: 25]
print(list.firstName)       // John
print(list.age)             // 25
print(list.$1)              // Doe</code></pre>
<h2 id="expressions-lists-and-blocks">Expressions, lists and blocks</h2>
<p>Basically those three types of lists has the same structure but act
different when executed.</p>
<pre><code>// Expressions will be evaluated an return the value
expression = (1 + 2)

// Binary operators wraps itself in an expression
expression = 1 + 2  # Same as (1 + 2)

/*
List items are separated by spaces, comma or semicolon.
Expressions return will be attribuited to item
*/
list = [&#39;first item&#39; (1 + 2)]  # Same as [&#39;first item&#39;, 5]

// Blocks are lists of expressions that can be called after declaration
def block {
  print(message)
}</code></pre>
<p>For source code or blocks, each line is considered an expression. To
execute a block, just call it as first item of an expression with any
arguments. The arguments are be appended to the internal block variables
stack. If there’s no argument, use an empty expression “()” as
argument.</p>
<pre><code>def sum { $0 + $1 }
print(sum 2 3)

/* or */

sum := { first + second }
print(sum(first: 2, second: 3))</code></pre>
<h2 id="context">Context</h2>
<p>Lists can be send as a context appended to global variables
context.</p>
<pre><code>name := &#39;Global name&#39;  // Declare a new variable in current stack

person = [
  name: &#39;Local name&#39;
  age: 20
]

print(name)            // Return &#39;Global name&#39;

print(person.name)     // &quot;person&quot; is set as context
                       // &quot;name&quot; returns list&#39;s &quot;name&quot; item

person.{               // Context blocks uses list as context
  name = &#39;New name&#39;    // Block of code that change &quot;person&quot; values
  age = 30
}
print(person.name)     // Return &#39;New name&#39;</code></pre>
<h2 id="conditions">Conditions</h2>
<p>Statements are represented by pairs of condition and execution
blocks. The last block is the else block.</p>
<pre><code>// Simple condition. Block executed
1 == 1 ? { print(&#39;TRUE&#39;) }
/* or */
if 1 == 1 { print(&#39;TRUE&#39;) }

// False condition. Else block is executed
1 != 1 ? { print(&#39;FALSE&#39;) } { print(&#39;ELSE&#39;) }
/* or */
if 1 != 1 { print(&#39;FALSE&#39;) } else { print(&#39;ELSE&#39;) }

// First is false. Second condition is true. Second block is executed
1 != 1 ? { print(&#39;FALSE&#39;) } 2 == 2 { print(&#39;TRUE&#39;) }
/* or */
if 1 != 1 { print(&#39;FALSE&#39;) } 2 == 2 { print(&#39;TRUE&#39;) }

// Two false conditions. Else block is executed
1 != 1 ? { print(&#39;FALSE&#39;) } 2 != 2 { print(&#39;FALSE&#39;) } else { print(&#39;ELSE&#39;) }
/* or */
if 1 != 1 { print(&#39;FALSE&#39;) } 2 != 2 { print(&#39;FALSE&#39;) } { print(&#39;ELSE&#39;) }</code></pre>
<p>The “else” keyword means “true” and it can be omitted. Different from
other languages, the “:” symbol can’t be used as “else”.</p>
<h2 id="loops">Loops</h2>
<p>While condition block is true, run execution block.</p>
<pre><code>i := 0
while ((i += 1) &lt;= 10) { print i }</code></pre>
<p>For each item in list, run execution block.</p>
<pre><code>list := [1, 2, 3] * { $0 * 2 }
list * { print($0) }            // 2 4 6
/* or */
for list { print($0) }</code></pre>
<p>For with range is used to iterate a range of numbers or a list.</p>
<pre><code>for 0..2 { print(i) }  // 0 1 2</code></pre>
<h2 id="string-and-list-functions">String and list functions</h2>
<pre><code>split &quot;Hello World!&quot; &quot; &quot;      // [&quot;Hello&quot;, &quot;World!&quot;]
join [&#39;Hello&#39;, &#39;World!&#39;] &#39; &#39;  // &quot;Hello World!&quot;
length &quot;John Doe&quot;             // 8
upper &quot;John Doe&quot;              // &quot;JOHN DOE&quot;
lower &quot;John Doe&quot;              // &quot;john doe&quot;</code></pre>
<h2 id="io">I/O</h2>
<p>Input and output functions.</p>
<pre><code>print(&#39;Enter your name:&#39;)    // Print to console
name = (input)               // Read user input
write &#39;file.txt&#39; name        // Write name to file
content = (read &#39;file.txt&#39;)  // Read file content</code></pre>
<h2 id="load-scripts-and-libraries">Load scripts and libraries</h2>
<p>You can load other scripts or dynamic libraries using the “load”
function.</p>
<pre><code>load &#39;script.ka&#39;   // Read and evaluate scripts
load &#39;library.so&#39;  // Load a dynamic library</code></pre>
<p>Dynamic libraries should have a function named “void ka_extend(Kamby
**ctx)” that will be called to extend the context with new
functions.</p>
<h2 id="overloading">Overloading</h2>
<p>Some operators are overloaded to perform different actions based on
argument types.</p>
<pre><code>1 + 2                // 3
&quot;John &quot; + &quot;Doe&quot;      // &quot;John Doe&quot;
[1, 2] + [3, 4]      // [1 2 3 4]
[1, 2] + 3           // [1 2 3]
1 + [2, 3]           // [1 2 3]

4 / 2                // 2
&quot;John Doe&quot; / &quot; &quot;     // [&quot;John&quot; &quot;Doe&quot;]
&quot;Doe&quot; / &quot;&quot;           // [&quot;D&quot; &quot;o&quot; &quot;e&quot;]

3 * 2                // 6
[1 2] * { $0 * 2 }   // [2 4]
[&quot;a&quot; &quot;b&quot; &quot;c&quot;] * &quot;-&quot;  // &quot;a-b-c&quot;</code></pre>
<h2 id="operators-and-keywords">Operators and keywords</h2>
<pre><code>true false
get def set del return
$ : := = . &amp;&amp; || ! == != &gt; &lt; &gt;= &lt;=
? .. + - * / % += -= *= /= %=
if else while for
split join length upper lower
print input read write load</code></pre>

      <h2>Download</h2>
      <a href="https://github.com/henriquegogo/kamby">GitHub Repository</a>

      <h2>License</h2>
      <p>MIT</p>

    </main>
    <footer>
      Made for fun by <a href="https://gogs.com.br" target="_blank">Henrique Gogó</a>
    </footer>
  </body>
</html>
